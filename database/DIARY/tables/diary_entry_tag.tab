CREATE TABLE diary_entry_tag (
   entry_id NUMBER NOT NULL ENABLE
  ,tag_id   NUMBER NOT NULL ENABLE
  ,CONSTRAINT pk_diary_entry_tag PRIMARY KEY ( entry_id
  ,tag_id )
    USING INDEX ENABLE
  ,CONSTRAINT fk_det_entry FOREIGN KEY ( entry_id )
    REFERENCES diary_entry ( entry_id )
      ON DELETE CASCADE ENABLE
  ,CONSTRAINT fk_det_tag FOREIGN KEY ( tag_id )
    REFERENCES tag ( tag_id )
      ON DELETE CASCADE ENABLE
);

--INDEXES

CREATE UNIQUE INDEX pk_diary_entry_tag ON diary_entry_tag (entry_id, tag_id);

--REFERENTIAL CONSTRAINTS

ALTER TABLE diary_entry_tag ADD CONSTRAINT fk_det_entry FOREIGN KEY (entry_id)
	  REFERENCES diary_entry (entry_id) ON DELETE CASCADE ENABLE;
ALTER TABLE diary_entry_tag ADD CONSTRAINT fk_det_tag FOREIGN KEY (tag_id)
	  REFERENCES tag (tag_id) ON DELETE CASCADE ENABLE;

--COMMENTS

COMMENT ON TABLE diary_entry_tag  IS 'Junction table for tags per entry.';

--TRIGGERS

--GRANTS

--SYNONYMS
